

gcp_credentials: ENCRYPTED[3d11b332216bbaa5cfb20219d2e2127c5d8b6d4448f8c87cf904696ae508413c70e3ea8c193583cf7d271812edc0b02c] 

gce_instance:
  image_project: ubuntu-os-cloud
  image_name: ubuntu-1904-disco-v20190417
  zone: us-central1-a
  cpu: 2
  memory: 40GB
  disk: 20

task:
  env:
    DEPENDENCIES: automake libtool gmake gcc wget openssl \
                  python3 py36-six py36-openssl py36-sphinx
    matrix:
      - COMPILER: gcc
      - COMPILER: clang

  prepare_script:
    - sysctl -w kern.coredump=0
    - pkg install -y ${DEPENDENCIES}

  configure_script:
    - ./boot.sh
    - ./configure CC=${COMPILER} CFLAGS="-g -O2 -Wall" \
                  MAKE=gmake --enable-Werror
